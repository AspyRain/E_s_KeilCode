module top4bt_avi (
    input                   rst_n       ,
    input                   clk         ,
    input                   uart_RXD    ,
    input                   echo1       ,
    
    output                  trig1       ,
    output                  uart_TXD    ,
    output      [7:0]       pwm         
);
    wire 				clk_us		            ;
    wire    [18:00]     data_o                  ;
    wire    [18:00]     data_f                  ;
    wire	[12:00]		distance_data_1		    ;
    timer #(.div_value(50_000_000)) TIMER0(
        .timeout(timer_1s),
        .clk(clk),
        .rst(~rst_n)
    );

    clk_div	u_clk_div(
        .clk		(clk	),
        .rstn		(rst_n	),
        .clk_us		(clk_us )
    );

    trig_driver	u_trig_driver(
        .clk_us		(clk_us	),
        .rstn		(rst_n	),
        .trig		(trig	)
    );

    echo_driver	echo1_driver(
        .clk		(clk	),
        .clk_us		(clk_us	),
        .rstn		(rst_n	),
        .echo		(echo1	),
        .data_o		(data_o	)
        );

    btCarTop        (
        .rst_n              (rst_n),
        .clk                (clk  ),
        .uart_RXD           (uart_RXD),
        .distance_data_1    (distance_data_1),
        .uart_TXD           (uart_TXD   ),
        .pwm                (pwm)
    );
        

    filter          (
        .rst_n        (rst_n),
        .clk           (clk),
        .pulse_num      (data_o),
        .filter_num     (data_f)
    )
    assign trig1 = trig;
    assign distance_data_1=data_f/100;
endmodule